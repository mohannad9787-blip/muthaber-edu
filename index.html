<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Muthaber EDU</title>
<style>
body {
    font-family: Arial;
    background:#0f766e;
    color:#000;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    margin:0;
}

.box {
    background:#fff;
    padding:30px;
    border-radius:15px;
    width:90%;
    max-width:400px;
    text-align:center;
}

input {
    width:100%;
    padding:12px;
    border-radius:8px;
    border:1px solid #ccc;
    margin-bottom:15px;
    font-size:16px;
}

button {
    background:#10b981;
    color:#fff;
    border:none;
    padding:12px;
    width:100%;
    border-radius:8px;
    font-size:18px;
    cursor:pointer;
}

.hidden {display:none;}

.link {
    background:#ecfdf5;
    padding:10px;
    border-radius:8px;
    word-break:break-all;
    margin-top:10px;
}
</style>
</head>

<body>

<div class="box" id="loginBox">
    <h2>Muthaber EDU</h2>
    <input id="phone" placeholder="Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
    <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
</div>

<div class="box hidden" id="appBox">
    <h2>Ù…Ø±Ø­Ø¨Ø§ ðŸ‘‹</h2>
    <p>Ø±Ù‚Ù…Ùƒ: <span id="userPhone"></span></p>
    <p>Ù†Ù‚Ø§Ø·Ùƒ: <b><span id="points">0</span></b></p>

    <h3>Ø±Ø§Ø¨Ø· Ø§Ù„Ø¥Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</h3>
    <div class="link" id="refLink"></div>

    <button onclick="copyLink()">Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</button>
</div>

<script>
let users = JSON.parse(localStorage.getItem("users") || "{}");

const params = new URLSearchParams(window.location.search);
const ref = params.get("ref");

function login() {
    let phone = document.getElementById("phone").value.trim();
    if(phone.length < 8) return alert("Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… ØµØ­ÙŠØ­");

    if(!users[phone]) {
        users[phone] = { points: 0 };

        if(ref && users[ref]) {
            users[ref].points += 10;
        }
    }

    localStorage.setItem("users", JSON.stringify(users));
    localStorage.setItem("current", phone);
    showApp();
}

function showApp() {
    let phone = localStorage.getItem("current");
    if(!phone) return;

    document.getElementById("loginBox").classList.add("hidden");
    document.getElementById("appBox").classList.remove("hidden");

    document.getElementById("userPhone").innerText = phone;
    document.getElementById("points").innerText = users[phone].points;

    let link = window.location.origin + window.location.pathname + "?ref=" + phone;
    document.getElementById("refLink").innerText = link;
}

function copyLink() {
    navigator.clipboard.writeText(document.getElementById("refLink").innerText);
    alert("ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ø¥Ø­Ø§Ù„Ø©!");
}

showApp();
</script>

</body>
</html>
